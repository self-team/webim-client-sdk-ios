# Как использовать

1. Получить **FAQBuilder** с помощью статичного метода **Webim.newFAQBuilder()**;
2. Установить название аккаунта с помощью метода **set(accountName:)** экземляра класса **FAQBuilder**;
3. Получить экземпляр протокола **FAQ** с помощью метода **build()** экземляра класса **FAQBuilder**;
4. Для возможности обращения к серверу необходимо вызывать метод **resume()** экземпляра класса **FAQ**;
5. Далее можно вызывать все методы протокола **FAQ**.


Пример использования:

```
do {
    let faq = try Webim.newFAQBuilder().set(accountName: "accountName").build()
    try faq.resume()
} catch {
}
```

# func newFAQBuilder() -> FAQBuilder класса Webim
Метод, необходимый для получения объекта **FAQBuilder**, который в свою очередь необходим для создания экземпляра класса **FAQ**.


# Класс FAQBuilder
Класс, экземпляр которого используется для получения экземпляра класса **FAQSession**. Экземпляр класса получается методом **newFAQBuilder()** класса **Webim**.

## `func set(accountName: String) -> FAQBuilder`

Метод необходим для задания названия аккаунта в системе **Webim** при создании блока часто задаваемых вопросов.

**Важно**: для получения экземпляра FAQ вызов метода является обязательным.

### Параметры

`accountName` – название аккаунта клиента в системе **Webim**. Обычно представляет из себя **URL**-сервера (например, *https://demo.webim.ru*), но может иметь и вид названия аккаунта одним словом (например, *demo*), если сервер находится в домене *webim.ru*.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `func set(application: String) -> FAQBuilder`

Метод необходим для задания названия приложения в системе **Webim** при создании блока часто задаваемых вопросов.

### Параметры

`application` – название приложения клиента в системе **Webim**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `func set(departmentKey: String) -> FAQBuilder`

Метод необходим для задания ключа отдела в системе **Webim** при создании блока часто задаваемых вопросов.

### Параметры

`departmentKey` – название приложения клиента в системе **Webim**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `func set(language: String) -> FAQBuilder`

Метод необходим для задания языка в системе **Webim** при создании блока часто задаваемых вопросов.

### Параметры

`language` – язык клиента в системе **Webim**.

### Возвращаемое значение

Возвращает тот же экземпляр класса **FAQBuilder**, но с установленным названием аккаунта.

## `func build() throws -> FAQ`
Метод, который вызывается в заключение перечисленных выше методов для получения экземпляра **FAQ**.

**Важно**: требует вызова метода **set(accountName: String)**.

### Возвращаемое значение

Возвращает объект **FAQ** с установленными параметрами с помощью остальных методов экземпляра класса.

### Исключения
Может выбрасывать ошибки типа **FAQBuilderError**.


# Перечисляемый тип FAQBuilderError
Значение типа соответствуют возможным ошибкам, которые могут возникнуть при вызове метода **build()** класса **FAQBuilder**.

Значение | Описание
------------|------------
nilAccountName | Возникает, когда при создании блока часто задаваемых вопросов не было передано значение названия аккаунта

# Протокол FAQ
Протокол, позволяющий производить манипуляции с текущим списком часто задаваемых вопросов.

Экземпляр класса **FAQ** получается с помощью методов класса **FAQBuilder**.

## `func resume() throws`
При создании экземпляра класса **FAQ**, соответствующий ему список часто задаваемых вопросов находится в приостановленном состоянии. Данный метод необходим для того, чтобы стартовать сетевую активность.

**Важно:** необходим для полноценного функционирования сервиса в контексте приложения.

### Исключения

Может выбрасывать ошибки типа **FAQAccessError**.


## `func pause() throws`
Метод, который используется для приостановки сетевой активности. Если список часто задаваемых вопросов уже находится в приостановленном состоянии, метод не производит никаких действий.

**Важно:** для вызова метода список часто задаваемых вопросов не должен находиться в деактивированном состоянии.


### Исключения
Может выбрасывать ошибки типа **FAQAccessError**.


## `func destroy() throws`

Метод, который используется для деактивации списка часто задаваемых вопросов и экземпляра класса. После вызова данного метода, никакие методы использованы быть не могут.

### Исключения

Может выбрасывать ошибки типа **FAQAccessError**.


##  `func getCategory(id: String, completionHandler: @escaping (_ result: Result<FAQCategory, FAQGetCompletionHandlerError>) -> Void)`

Метод, который используется для получения объекта класса **FAQCategory** через **completionHandler**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** категории блока часто задаваемых вопросов. Тип – **String**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQCategory**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func getCategoriesForApplication(completionHandler: @escaping (_ result: Result<[String], FAQGetCompletionHandlerError>) -> Void)`
Метод, который используется для получения массива идентификаторов категорий, подходящих для заданных параметров, через **completionHandler**. Работает только тогда, когда заданы параметры приложения.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает массив идентификаторов категорий типа **String**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func getCachedCategory(id: String, completionHandler: @escaping (Result<FAQCategory, FAQGetCompletionHandlerError>) -> Void)`

Метод, который используется для получения объекта класса **FAQCategory** через **completionHandler** из сохранённого кэша.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** категории блока часто задаваемых вопросов. Тип – **String**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQCategory**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func getItem(id: String, openFrom: FAQItemSource?, completionHandler: @escaping (Result<FAQItem, FAQGetCompletionHandlerError>) -> Void)`
Метод, который используется для получения объекта класса **FAQItem** через **completionHandler**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** страницы блока часто задаваемых вопросов. Тип – **String**.

`openFrom` – запрос статьи из определённого источника. Тип – **FAQItemSource**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQItem**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func getCachedItem(id: String, openFrom: FAQItemSource?, completionHandler: @escaping (Result<FAQItem, FAQGetCompletionHandlerError>) -> Void)`
Метод, который используется для получения объекта класса **FAQItem** через **completionHandler** из кэша.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** страницы блока часто задаваемых вопросов. Тип – **String**.

`openFrom` – запрос статьи из определённого источника. Тип – **FAQItemSource**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQItem**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func getStructure(id: String, completionHandler: @escaping (Result<FAQStructure, FAQGetCompletionHandlerError>) -> Void)`
Метод, который используется для получения объекта класса **FAQStructure** через **completionHandler**.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** вершины, которая будет корнем дерева (структуры) блока часто задаваемых вопросов. Тип – **String**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQStructure**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func getCachedStructure(id: String, completionHandler: @escaping (Result<FAQStructure, FAQGetCompletionHandlerError>) -> Void)`
Метод, который используется для получения объекта класса **FAQStructure** через **completionHandler** из кэша.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`id` – **ID** вершины, которая будет корнем дерева (структуры) блока часто задаваемых вопросов. Тип – **String**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQStructure**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func like(item: FAQItem, completionHandler: @escaping (Result<FAQItem, FAQGetCompletionHandlerError>) -> Void)`
Метод, который позволяет поставить отметку "нравится" для статьи.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`item` – страница, которой необходимо поставить оценку. Тип – **FAQItem**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQItem**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.


## `func dislike(item: FAQItem, completionHandler: @escaping (Result<FAQItem, FAQGetCompletionHandlerError>) -> Void)`

Метод, который позволяет поставить отметку "не нравится" для статьи.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

### Параметры

`item` – страница, которой необходимо поставить оценку. Тип – **FAQItem**.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQItem**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

## `func search(query: String, category: String, limitOfItems: Int, completionHandler: @escaping (Result<[FAQSearchItem], FAQGetCompletionHandlerError>) -> Void)`

Метод, который позволяет найти статьи по ключевому слову.

**Важно:** для правильной работы метода требуется вызов метод **resume()**.

## Параметры

`query` – запрос, по которому осуществляется поиск. Тип – **String**.

`category` – **ID** категории, в которой осуществляется поиск. Тип – **String**.

`limitOfItems` – число, не больше которого нужно вернуть статей.

`completionHandler` – замыкание, которое выполняется после завершения выполнения метода. При успешном завершении работы метода замыкание принимает один параметр типа **FAQSearchItem**, при неуспешном – параметр типа **FAQGetCompletionHandlerError**, и не имеет возвращаемого типа.

# перечисляемый тип FAQAccessError
Значение типа соответствуют ошибкам, которые могут выбрасываться некоторыми методами протоколов **FAQ**.

Значение | Описание
---------|---------
**invalidThread** | Возникает, когда метод был вызван не из потока, в котором был создан экземпляр блока часто задаваемых вопросов.
**invalidSession** | Возникает при попытке использования методов недействительного экземпляра **faq** (например, после того, как на нем был вызван метод **destroy()**).

# протокол FAQCategory
Представление категории блока часто задаваемых вопросов. Предоставляет методы получения информации о категории.

Объекты **FAQCategory** могут быть получены с помощью **completionHandler** в методах **getCategory(id: Int, completion: @escaping (Result<FAQCategory, FAQGetCompletionHandlerError>) -> Void)** и **getCachedCategory(id: Int, completionHandler: @escaping (Result<FAQCategory, FAQGetCompletionHandlerError>) -> Void)**. 

## `func getId() -> String`

Возвращает идентификатор категории. Тип – **String**.

## `func getTitle() -> String`

Возвращает заголовок категории. Тип – String.

## `func getItems() -> [FAQItems]`
Категория содержит страницы блока часто задаваемых вопросов.

Возвращает страницы, принадлежащих категории. Тип – **[FAQItem]**.

## `func getSubcategories() -> [FAQCategoryInfo]`
Категория содержит подкатегории. Для удобства данный метод возвращает информацию о подкатегориях без её страниц и подкатегорий.

Возвращает информацию о подкатегориях, принадлежащих категории. Тип – **[FAQCategoryInfo]**.

# `протокол FAQCategoryInfo`
Представление информации о категории блока часто задаваемых вопросов. Предоставляет методы получения идентификатора и заголовка категории.

Объекты **FAQCategoryInfo** могут быть получены с помощью метода **getSubcategories()**.

## `func getId() -> String`

Возвращает идентификатор категории. Тип – **String**.

## `func getTitle() -> String`

Возвращает заголовок категории. Тип – **String**.

# протокол FAQItem
Представление страницы блока часто задаваемых вопросов. Предоставляет методы получения информации о странице.

Объекты **FAQItem** могут быть получены с completionHandler функции **getItem(id: String, completionHandler: @escaping (Result<FAQItem, FAQGetCompletionHandlerError>) -> Void)**.

## `func getId() -> String`

Возвращает идентификатор страницы. Тип – **String**.

## `func getTitle() -> String`

Возвращает заголовок страницы. Тип – **String**.

## `func getCategories() -> [String]`
Страница может принадлежать нескольким категориям.

Возвращает идентификаторы категорий, которым принадлежит страница. Тип – **[String]**.

## `func getTags() -> [String]`
У страницы есть набор тэгов.

Возвращает список тэгов, которыми отмечена страница. Тип – **[String]**.

## `func getContent() -> String`

Возвращает содержание страницы. Тип – **String**.

## `func getLikeCount() -> Int`
Страница содержит количество отметок "Нравится".

Возвращает количество отметок "Нравится" страницы. Тип – **Int**.

## `func getDislikeCount() -> Int`
Страница содержит количество отметок "Не нравится".

Возвращает количество отметок "Не нравится" страницы. Тип – **Int**.

## `func getUserRate() -> UserRate`
Страница может быть отмечена пользователем.

Возварщает оценку пользователя. Тип – **UserRate**.

# перечисляемый тип UserRate
Страница может быть отмечена пользователем.

Значение | Описание
---------|---------
**like** | Пользователю понравилась страница
**dislike** | Пользователю не понравилась страница
**noRate** | Страница не оценена пользователем

# протокол FAQSearchItem
Краткая информация о страницах, полученных в результате поиска по ключевому слову.

## `func getID() -> String`

Возвращает идентификатор страницы. Тип – **String**.

## `func getTitle() -> String`

Возвращает заголовок страницы. Тип – **String**.

## `func getScore() -> Double`
У страницы есть оценка поиска. Чем больше оценка, тем больше страница подходит под поисковой запрос.

Возвращает оценку поиска. Тип – **Double**.

# протокол FAQStructure
Представление дерева (структуры) блока часто задаваемых вопросов. Предоставляет методы получения информации о дереве блока часто задаваемых вопросов.

Объекты **FAQStructure** могут быть получены с помощью **completionHandler** метода **getStructure(id: Int, completionHandler: @escaping (Result<FAQStructure, FAQGetCompletionHandlerError>) -> Void)**.

## `func getId() -> String`
У дерева есть корневой элемент.

Возвращает идентификатор корневого элемента дерева. Тип – **String**.

## `func getTitle() -> String`

Возвращает заголовок корня. Тип – **String**.

## `func getType() -> RootType`
Корень дерева может быть категорией или страницей.

Возвращает тип корневого элемента. Тип – **RootType**.

## `func getChildren() -> [FAQStructure]`

Возвращает поддеревья, корнями которых являются прямые потомки корня дерева (структуры). Тип – **[FAQStructure]**.

# перечисляемый тип RootType
Возможные типы корня дерева блока часто задаваемых вопросов (см. метод **getType() -> RootType** протокола **FAQStructure**).

Значение | Описание
---------|---------
item | Корень дерева является страницей
category | Корень дерева является категорией
unknown | Корень дерева имеет неизвестный тип для данной версии SDK

# перечисляемый тип FAQItemSource
Возможный источник статьи. Статья может быть взята из поиска или из структуры или категории.

Значение | Описание
---------|---------
search | Статью запрашивают из поиска
tree | Статью запрашивают из структуры или категории
